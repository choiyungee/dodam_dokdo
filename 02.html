<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„: ì—­ì‚¬ì™€ ì§„ì‹¤ì˜ íƒ€ì„ë¼ì¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif KR', serif;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        .timeline-line {
            position: absolute;
            left: 28px;
            top: 40px;
            bottom: 0;
            width: 2px;
            background-image: linear-gradient(to bottom, #cbd5e1 50%, transparent 50%);
            background-size: 2px 20px;
            background-repeat: repeat-y;
            z-index: 0;
        }

        .timeline-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .timeline-card:hover {
            transform: translateX(4px);
        }

        .timeline-card.active {
            border-color: #3b82f6;
            background-color: #eff6ff;
            transform: translateX(8px);
        }

        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Century Header Style */
        .century-header {
            position: relative;
            z-index: 10;
            background-color: #f1f5f9;
            color: #64748b;
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 9999px;
            display: inline-block;
            font-size: 0.85rem;
            margin: 20px 0 10px 0;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            font-family: 'Noto Serif KR', serif;
        }
        
        .century-wrapper {
            position: relative;
            padding-left: 5px;
        }

        /* Play Button Pulse */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
        .playing-indicator {
            animation: pulse-ring 2s infinite;
        }

    </style>
    <!-- Chosen Palette: Slate & Blue Modern Theme with Historical Serif Accents -->
    <!-- Added Features: Century Grouping, Auto-Play Functionality -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header / Hero -->
    <header class="relative bg-slate-900 text-white py-16 px-4 overflow-hidden">
        <!-- Home Button -->
        <a href="index.html" class="absolute top-4 left-4 md:top-8 md:left-8 z-20 flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-white backdrop-blur-sm transition-all text-sm font-medium border border-white/10 shadow-lg group">
            <span class="group-hover:scale-110 transition-transform">ğŸ </span>
            <span class="hidden md:inline">í™ˆìœ¼ë¡œ</span>
        </a>

        <!-- Abstract Background Pattern -->
        <div class="absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-blue-500 via-slate-900 to-slate-900"></div>
        
        <div class="relative max-w-6xl mx-auto text-center z-10">
            <div class="inline-block mb-4 px-3 py-1 border border-blue-400/30 rounded-full bg-blue-900/30 text-blue-200 text-xs font-semibold tracking-widest uppercase">Dokdo History Timeline</div>
            <h1 class="text-4xl md:text-6xl font-black mb-6 tracking-tight leading-tight">ë…ë„ ì—°ëŒ€ê¸°<br><span class="text-blue-400 font-serif italic">ì—­ì‚¬ì™€ ì§„ì‹¤ì˜ ê¸°ë¡</span></h1>
            <p class="text-lg md:text-xl text-slate-300 max-w-2xl mx-auto leading-relaxed font-light">
                1454ë…„ ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ë¶€í„° í˜„ëŒ€ê¹Œì§€.<br>ë¬¸í—Œê³¼ ì—­ì‚¬ê°€ ì¦ëª…í•˜ëŠ” ëŒ€í•œë¯¼êµ­ì˜ ì˜í†  ì£¼ê¶Œì„ í™•ì¸í•˜ì„¸ìš”.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-12 space-y-16">

        <!-- Intro & Dashboard Section -->
        <section class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch">
            <!-- Intro Text -->
            <div class="lg:col-span-4">
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 h-full flex flex-col justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 mb-4 pb-4 border-b border-slate-100">ë°ì´í„°ë¡œ ë³´ëŠ” ë…ë„</h2>
                        <p class="text-slate-600 mb-8 leading-relaxed">
                            ì´ ë¦¬í¬íŠ¸ëŠ” 18ê°œì˜ ì£¼ìš” ì—­ì‚¬ì  ì‚¬ê±´ì„ í†µí•´ ë…ë„ ì˜ìœ ê¶Œì˜ íë¦„ì„ ì‹œê°í™”í•©ë‹ˆë‹¤. ì¡°ì„ ì‹œëŒ€ì˜ ëª…í™•í•œ ì˜í†  ì¸ì‹ê³¼ ê·¼í˜„ëŒ€ ì¼ë³¸ì˜ ë¶ˆë²• í¸ì… ì‹œë„ë¥¼ ë°ì´í„°ë¥¼ í†µí•´ ë¹„êµí•´ë³´ì„¸ìš”.
                        </p>
                    </div>
                    
                    <!-- Key Metric -->
                    <div class="grid grid-cols-2 gap-4 mt-auto">
                        <div class="bg-blue-50/50 p-5 rounded-xl text-center border border-blue-100">
                            <div class="text-4xl font-black text-blue-600 serif mb-1" id="totalEvents">0</div>
                            <div class="text-xs text-blue-500 font-bold uppercase tracking-wide">ì´ ì‚¬ê±´</div>
                        </div>
                        <div class="bg-amber-50/50 p-5 rounded-xl text-center border border-amber-100">
                            <div class="text-4xl font-black text-amber-600 serif mb-1" id="joseonEvents">0</div>
                            <div class="text-xs text-amber-500 font-bold uppercase tracking-wide">ì¡°ì„ /ëŒ€í•œì œêµ­</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Chart 1: Era Distribution -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-bold text-slate-700">ì‹œëŒ€ë³„ ì‚¬ê±´ ë¶„í¬</h3>
                        <div class="h-1 w-10 bg-blue-500 rounded-full"></div>
                    </div>
                    <div class="chart-container">
                        <canvas id="eraChart"></canvas>
                    </div>
                </div>

                <!-- Chart 2: Category Distribution -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-bold text-slate-700">ìœ í˜•ë³„ ë¶„ì„</h3>
                        <div class="h-1 w-10 bg-amber-500 rounded-full"></div>
                    </div>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timeline Explorer Section -->
        <section id="timeline-section" class="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden">
            <!-- Toolbar -->
            <div class="p-6 md:p-8 bg-white border-b border-slate-100 sticky top-0 z-30 bg-opacity-90 backdrop-blur-md">
                <div class="flex flex-col xl:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-4 w-full md:w-auto">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ì—­ì‚¬ íƒ€ì„ë¼ì¸ íƒìƒ‰</h2>
                            <p class="text-sm text-slate-500 mt-1">ì—°ëŒ€ê¸°ìˆœìœ¼ë¡œ ì—­ì‚¬ì˜ íë¦„ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                        </div>
                    </div>
                    
                    <!-- Controls Container -->
                    <div class="flex flex-col md:flex-row items-center gap-4 w-full md:w-auto justify-end">
                         <!-- Play Button -->
                         <button onclick="togglePlay()" id="playBtn" class="flex items-center gap-2 px-6 py-2.5 rounded-full bg-slate-900 text-white hover:bg-slate-700 transition-all shadow-lg hover:shadow-xl font-bold text-sm w-full md:w-auto justify-center">
                            <span id="playIcon">â–¶</span> 
                            <span id="playText">ì—­ì‚¬ ì¬ìƒ</span>
                        </button>

                        <div class="h-8 w-px bg-slate-200 hidden md:block"></div>

                        <!-- Filters -->
                        <div class="flex flex-wrap gap-2 justify-center bg-slate-100/80 p-1.5 rounded-full w-full md:w-auto" id="filter-container">
                            <button onclick="filterTimeline('all')" class="filter-btn active px-4 py-2 rounded-full text-sm font-bold transition-all bg-white text-slate-800 shadow-sm" data-filter="all">ì „ì²´</button>
                            <button onclick="filterTimeline('record')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all text-slate-500 hover:text-amber-700" data-filter="record">ğŸ“œ ê¸°ë¡</button>
                            <button onclick="filterTimeline('admin')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all text-slate-500 hover:text-blue-700" data-filter="admin">âš–ï¸ í–‰ì •</button>
                            <button onclick="filterTimeline('conflict')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all text-slate-500 hover:text-red-700" data-filter="conflict">âš”ï¸ ë¶„ìŸ</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 min-h-[700px]">
                <!-- Timeline List (Left) - Scrollable -->
                <div class="lg:col-span-5 bg-slate-50/50 p-6 md:p-8 relative border-r border-slate-100">
                    <div class="timeline-line"></div>
                    <div id="timeline-list" class="space-y-1 relative z-10 pb-20">
                        <!-- Dynamic JS Content -->
                    </div>
                </div>

                <!-- Detail View (Right) - Sticky -->
                <div class="lg:col-span-7 bg-white relative">
                    <div class="lg:sticky lg:top-0 lg:h-screen lg:max-h-[800px] flex flex-col justify-center p-8 md:p-12 overflow-y-auto">
                        
                        <div id="detail-placeholder" class="text-center w-full py-20 flex flex-col items-center justify-center h-full opacity-50">
                            <div class="w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6 text-4xl">ğŸ‘ˆ</div>
                            <h3 class="text-xl text-slate-400 font-medium font-serif">íƒ€ì„ë¼ì¸ì—ì„œ ì‚¬ê±´ì„ ì„ íƒí•˜ì—¬<br>ì—­ì‚¬ì˜ ì§„ì‹¤ì„ í™•ì¸í•˜ì„¸ìš”.</h3>
                        </div>
                        
                        <div id="detail-content" class="hidden w-full fade-in">
                            <div class="mb-6 flex items-center gap-4 border-b border-slate-100 pb-6">
                                <span id="detail-year" class="text-5xl md:text-6xl font-black text-slate-200 serif tracking-tighter transition-all duration-500"></span>
                                <div class="h-12 w-px bg-slate-200"></div>
                                <div>
                                    <span id="detail-badge" class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-1 inline-block"></span>
                                    <p id="detail-source" class="text-slate-400 font-mono text-xs mt-1"></p>
                                </div>
                            </div>

                            <h2 id="detail-title" class="text-3xl md:text-4xl font-bold text-slate-900 mb-8 leading-tight serif"></h2>
                            
                            <div class="space-y-8">
                                <div class="relative">
                                    <div class="absolute -left-4 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500 to-transparent rounded-full opacity-30"></div>
                                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">ì‚¬ê±´ì˜ ë‚´ìš© ë° ì˜ë¯¸</h4>
                                    <p id="detail-desc" class="text-lg md:text-xl text-slate-700 leading-loose font-light"></p>
                                </div>

                                <div class="bg-slate-50 rounded-xl p-5 border border-slate-100 flex items-start gap-4">
                                    <div class="bg-white p-2 rounded-lg shadow-sm text-xl border border-slate-100" id="detail-icon">ğŸ“„</div>
                                    <div>
                                        <h4 class="text-xs font-bold text-slate-400 uppercase mb-1">ì¹´í…Œê³ ë¦¬ ì •ë³´</h4>
                                        <p id="detail-category-text" class="text-slate-800 font-medium"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-slate-400 py-12 border-t border-slate-200">
            <div class="max-w-md mx-auto">
                <p class="text-sm font-medium mb-2">ëŒ€í•œë¯¼êµ­ ì˜í†  ë…ë„</p>
                <p class="text-xs opacity-70">ë°ì´í„° ì¶œì²˜: ì œê³µëœ ë…ë„ ê´€ë ¨ ì£¼ìš” ì—°ëŒ€ê¸° ë¦¬í¬íŠ¸<br>ë³¸ í˜ì´ì§€ëŠ” êµìœ¡ ë° ì •ë³´ ì „ë‹¬ì„ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            </div>
        </footer>

    </main>

    <script>
        // --- Data Source ---
        const dokdoData = [
            { year: 1454, title: "ì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€", desc: "ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ê°•ì›ë„ ìš¸ì§„í˜„ì— ì†í•œë‹¤ê³  ëª…í™•íˆ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë…ë„ê°€ ì¡°ì„ ì˜ ê³ ìœ  ì˜í† ì„ì„ ì…ì¦í•˜ëŠ” ìµœì´ˆì˜ ê´€ì°¬(êµ­ê°€) ê¸°ë¡ìœ¼ë¡œ ì—­ì‚¬ì  ê°€ì¹˜ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [1]", category: "record", typeLabel: "ë¬¸í—Œ/ê¸°ë¡" },
            { year: 1531, title: "ì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒ", desc: "ë…ë„ê°€ ìš°ë¦¬ ì˜í† ì„ì„ ë°íˆëŠ” ê´€ì°¬ ì§€ë¦¬ì§€ê°€ ì¶”ê°€ë¡œ í¸ì°¬ë˜ì—ˆìŠµë‹ˆë‹¤. êµ­ê°€ ì°¨ì›ì—ì„œ ì˜í†  ì¸ì‹ì„ ì§€ì†ì ìœ¼ë¡œ ì¬í™•ì¸í–ˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.", source: "ì¶œì²˜: [2]", category: "record", typeLabel: "ë¬¸í—Œ/ê¸°ë¡" },
            { year: 1667, title: "ì€ì£¼ì‹œì²­í•©ê¸°", desc: "ì¼ë³¸ì˜ ë¬¸í—Œìœ¼ë¡œ, ìš¸ë¦‰ë„ì™€ ë…ë„ê°€ ì¼ë³¸ ì˜í†  ë°–(ì¡°ì„  ë•…)ì„ì„ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤. ì¼ë³¸ ìŠ¤ìŠ¤ë¡œ ë…ë„ë¥¼ ìêµ­ ì˜í† ì—ì„œ ì œì™¸í–ˆë‹¤ëŠ” ì¤‘ìš”í•œ ì¦ê±°ì…ë‹ˆë‹¤.", source: "ì¶œì²˜: [3]", category: "record", typeLabel: "ì¼ë³¸ ë¬¸í—Œ" },
            { year: 1693, title: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ì¼ë³¸ìœ¼ë¡œ ëŒë ¤ê°€ì„œë„ êµ´í•˜ì§€ ì•Šê³  ë…ë„ê°€ ì¡°ì„  ë•…ì„ì„ ê°•ë ¥íˆ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤. ë¯¼ê°„ ì™¸êµì˜ ìŠ¹ë¦¬ì´ì ì˜í†  ìˆ˜í˜¸ ì˜ì§€ì˜ ìƒì§•ì…ë‹ˆë‹¤.", source: "ì¶œì²˜: [4]", category: "conflict", typeLabel: "í™œë™/ë¶„ìŸ" },
            { year: 1696, title: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´", desc: "ì•ˆìš©ë³µì´ ë‹¤ì‹œ ì¼ë³¸ìœ¼ë¡œ ê±´ë„ˆê°€ ì–´ë¶€ë“¤ì˜ ë¶ˆë²• ì¹¨ë²”ì— í•­ì˜í–ˆìŠµë‹ˆë‹¤. ì´ì— ì¼ë³¸ ë§‰ë¶€ëŠ” ê³µì‹ì ìœ¼ë¡œ 'ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹'ì„ ë‚´ë¦¬ê²Œ ë©ë‹ˆë‹¤.", source: "ì¶œì²˜: [5]", category: "conflict", typeLabel: "í™œë™/ë¶„ìŸ" },
            { year: 1785, title: "ì‚¼êµ­ì ‘ì–‘ì§€ë„", desc: "ì¼ë³¸ì˜ ì‹¤í•™ì í•˜ì•¼ì‹œ ì‹œí—¤ì´ê°€ ì œì‘í•œ ì§€ë„ì…ë‹ˆë‹¤. ë…ë„ë¥¼ ì¡°ì„ ìƒ‰(í™©ìƒ‰)ìœ¼ë¡œ ì¹ í•˜ê³  ì˜†ì— 'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ ëª…í™•íˆ í‘œê¸°í•˜ì—¬ ì¼ë³¸ ì˜í† ì™€ êµ¬ë¶„í–ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [6]", category: "record", typeLabel: "ì¼ë³¸ ì§€ë„" },
            { year: 1877, title: "íƒœì •ê´€ ì§€ë ¹", desc: "ë©”ì´ì§€ ì‹œëŒ€ ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì¸ íƒœì •ê´€ì´ 'ë…ë„ì™€ ìš¸ë¦‰ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ë‹¤'ê³  ë‚´ë¬´ì„±ì— ë‚´ë¦° ê³µì‹ ì§€ë ¹ì…ë‹ˆë‹¤. ì¼ë³¸ ì •ë¶€ê°€ ë…ë„ ì˜ìœ ê¶Œì„ ë¶€ì •í•œ ê²°ì •ì  ì¦ê±°ì…ë‹ˆë‹¤.", source: "ì¶œì²˜: [7]", category: "admin", typeLabel: "í–‰ì •/ì¡°ì•½" },
            { year: 1900, title: "ëŒ€í•œì œêµ­ ì¹™ë ¹ 41í˜¸", desc: "ê³ ì¢… í™©ì œê°€ ë…ë„ë¥¼ ìš¸ë¦‰êµ°ì˜ ê´€í•  êµ¬ì—­ìœ¼ë¡œ ê³µì‹ ë°˜í¬í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê·¼ëŒ€ êµ­ì œë²•ì ìœ¼ë¡œ ë…ë„ê°€ ëŒ€í•œë¯¼êµ­ì˜ ì˜í† ì„ì„ ëŒ€ì™¸ì— ì„ í¬í•œ ì‚¬ê±´ì…ë‹ˆë‹¤.", source: "ì¶œì²˜: [8]", category: "admin", typeLabel: "í–‰ì •/ì¡°ì•½" },
            { year: 1905, title: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ 40í˜¸", desc: "ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ êµ°ì‚¬ì  ëª©ì ìœ¼ë¡œ ë…ë„ë¥¼ 'ë‹¤ì¼€ì‹œë§ˆ'ë¼ ì¹­í•˜ë©° ë¶ˆë²•ì ìœ¼ë¡œ í¸ì…í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì œêµ­ì£¼ì˜ ì¹¨íƒˆì˜ ì‹œì‘ì„ ì•Œë¦¬ëŠ” ë¶ˆë²• í–‰ìœ„ì˜€ìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [9]", category: "admin", typeLabel: "ë¶ˆë²• í¸ì…" },
            { year: 1906, title: "ì‹¬í¥íƒ ë³´ê³ ì„œ", desc: "ë‹¹ì‹œ ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì´ ë…ë„ê°€ ì¼ë³¸ì— í¸ì…ë˜ì—ˆë‹¤ëŠ” ì†Œì‹ì„ ë“£ê³ , ì¦‰ì‹œ 'ë³¸êµ° ì†Œì† ë…ë„'ë¼ëŠ” í‘œí˜„ì„ ì“°ë©° ì¤‘ì•™ ì •ë¶€ì— ë³´ê³ í•˜ì—¬ ë¬´íš¨ì„ì„ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [8]", category: "admin", typeLabel: "í–‰ì • ë³´ê³ " },
            { year: 1946, title: "SCAPIN ì œ677í˜¸", desc: "ì œ2ì°¨ ì„¸ê³„ëŒ€ì „ ì¢…ì „ í›„ ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹(SCAPIN) ì œ677í˜¸ëŠ” ë…ë„ë¥¼ ì¼ë³¸ì˜ í†µì¹˜ê¶Œ ë° ì˜í† ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì œì™¸í–ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [10]", category: "admin", typeLabel: "êµ­ì œ ì¡°ì•½" },
            { year: 1951, title: "ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°•í™”ì¡°ì•½", desc: "ì¼ë³¸ì´ í•œêµ­ì˜ ë…ë¦½ì„ ì¸ì •í•˜ëŠ” ì¡°ì•½ì…ë‹ˆë‹¤. ë…ë„ê°€ í•œêµ­ ì˜í†  ë¦¬ìŠ¤íŠ¸ì— ëª…ì‹œì ìœ¼ë¡œ ì íˆì§€ ì•Šê³  ëˆ„ë½ë˜ì–´, ì´í›„ ì¼ë³¸ì´ ì˜ìœ ê¶Œì„ ì£¼ì¥í•˜ëŠ” ë¹Œë¯¸ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [11]", category: "admin", typeLabel: "êµ­ì œ ì¡°ì•½" },
            { year: 1952, title: "í‰í™”ì„  ì„ í¬", desc: "ì´ìŠ¹ë§Œ ëŒ€í†µë ¹ì´ 'ì¸ì ‘í•´ì–‘ì£¼ê¶Œì— ê´€í•œ ëŒ€í†µë ¹ ì„ ì–¸'ì„ í†µí•´ í‰í™”ì„ ì„ ì„ í¬í•˜ê³ , ë…ë„ë¥¼ í¬í•¨í•œ ì¸ì ‘ í•´ì–‘ì— ëŒ€í•œ ì£¼ê¶Œì„ êµ­ì œ ì‚¬íšŒì— ì²œëª…í–ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [12]", category: "admin", typeLabel: "í–‰ì • ì„ ì–¸" },
            { year: 1953, title: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ í™œë™", desc: "í•œêµ­ì „ìŸì˜ í˜¼ë€ ì†ì—ì„œ í™ìˆœì¹  ëŒ€ì¥ ë“± ë¯¼ê°„ì¸ë“¤ì´ ìë°œì ìœ¼ë¡œ ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ë¥¼ ì¡°ì§í•˜ì—¬ 3ë…„ 8ê°œì›”ê°„ ë…ë„ì— ìƒì£¼í•˜ë©° ì¼ë³¸ì˜ ì¹¨ë²”ì„ ë§‰ì•„ëƒˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [13], [14]", category: "conflict", typeLabel: "ë¯¼ê°„ í™œë™" },
            { year: 1965, title: "í•œì¼ê¸°ë³¸ì¡°ì•½", desc: "í•œì¼ êµ­êµ ì •ìƒí™” ê³¼ì •ì—ì„œ ë…ë„ ë¬¸ì œëŠ” ì–‘êµ­ ê°„ì˜ ê²©ë ¬í•œ ëŒ€ë¦½ìœ¼ë¡œ ì¸í•´ ì§ì ‘ ì–¸ê¸‰ë˜ì§€ ì•Šê³  ë¯¸í•´ê²° ìƒíƒœë¡œ ë´‰í•©ë˜ì—ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [15]", category: "admin", typeLabel: "êµ­ì œ ì¡°ì•½" },
            { year: 1998, title: "ì‹ í•œì¼ì–´ì—…í˜‘ì •", desc: "IMF ì™¸í™˜ìœ„ê¸° ë‹¹ì‹œ ì²´ê²°ëœ ì–´ì—…í˜‘ì •ìœ¼ë¡œ, ë…ë„ê°€ í•œì¼ ì¤‘ê°„ìˆ˜ì—­ì— í¬í•¨ë˜ë©´ì„œ ì˜ìœ ê¶Œ ë…¼ë€ê³¼ ì–´ì—…ê¶Œ ë¬¸ì œê°€ ë‹¤ì‹œ ë¶ˆê±°ì¡ŒìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [16]", category: "admin", typeLabel: "êµ­ì œ í˜‘ì •" },
            { year: 2005, title: "ë‹¤ì¼€ì‹œë§ˆì˜ ë‚  ì œì •", desc: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„ ì˜íšŒê°€ 1905ë…„ì˜ ë¶ˆë²• í¸ì…ì¼ì¸ 2ì›” 22ì¼ì„ ê¸°ë…í•˜ì—¬ 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì¡°ë¡€ë¥¼ ì œì •, ì˜ìœ ê¶Œ ë„ë°œì„ ë…¸ê³¨í™”í–ˆìŠµë‹ˆë‹¤.", source: "ì¶œì²˜: [17]", category: "conflict", typeLabel: "ê°ˆë“± ì‹¬í™”" },
            { year: 2011, title: "ì¼ë³¸ êµê³¼ì„œ ì™œê³¡", desc: "ì¼ë³¸ ë¬¸ë¶€ê³¼í•™ì„±ì˜ ê²€ì •ì„ í†µê³¼í•œ ì¤‘í•™êµ êµê³¼ì„œ 14ì¢…ì— ë…ë„ ì˜ìœ ê¶Œ ì£¼ì¥ì´ ê¸°ìˆ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë¯¸ë˜ ì„¸ëŒ€ì—ê²Œ ì™œê³¡ëœ ì—­ì‚¬ë¥¼ ê°€ë¥´ì¹˜ë ¤ëŠ” ì‹œë„ì…ë‹ˆë‹¤.", source: "ì¶œì²˜: [18]", category: "conflict", typeLabel: "ì—­ì‚¬ ì™œê³¡" }
        ];

        // --- State ---
        let currentFilter = 'all';
        let selectedEventId = null; 
        let isPlaying = false;
        let playInterval = null;

        // --- DOM Elements ---
        const timelineList = document.getElementById('timeline-list');
        const detailPlaceholder = document.getElementById('detail-placeholder');
        const detailContent = document.getElementById('detail-content');
        const playBtn = document.getElementById('playBtn');
        const playText = document.getElementById('playText');
        const playIcon = document.getElementById('playIcon');
        
        // --- Init Function ---
        function init() {
            calculateStats();
            renderCharts();
            renderTimeline();
            // Desktop UX: Select first item automatically
            if(window.innerWidth >= 1024) {
                showDetail(dokdoData[0].year);
            }
        }

        // --- Statistics & Charts ---
        function calculateStats() {
            document.getElementById('totalEvents').innerText = dokdoData.length;
            const joseonCount = dokdoData.filter(d => d.year < 1910).length;
            document.getElementById('joseonEvents').innerText = joseonCount;
        }

        function renderCharts() {
            const eras = { '15-16ì„¸ê¸°': 0, '17-18ì„¸ê¸°': 0, '19ì„¸ê¸°': 0, '20ì„¸ê¸° ì „ë°˜': 0, '20ì„¸ê¸° í›„ë°˜': 0, '21ì„¸ê¸°': 0 };
            dokdoData.forEach(d => {
                if (d.year < 1600) eras['15-16ì„¸ê¸°']++;
                else if (d.year < 1800) eras['17-18ì„¸ê¸°']++;
                else if (d.year < 1900) eras['19ì„¸ê¸°']++;
                else if (d.year < 1950) eras['20ì„¸ê¸° ì „ë°˜']++;
                else if (d.year < 2000) eras['20ì„¸ê¸° í›„ë°˜']++;
                else eras['21ì„¸ê¸°']++;
            });

            new Chart(document.getElementById('eraChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(eras),
                    datasets: [{
                        label: 'ì‚¬ê±´ ìˆ˜',
                        data: Object.values(eras),
                        backgroundColor: '#60a5fa', 
                        hoverBackgroundColor: '#2563eb', 
                        borderRadius: 6,
                        barThickness: 24
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1e293b',
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: { label: (ctx) => `${ctx.raw}ê±´ì˜ ì—­ì‚¬ì  ê¸°ë¡` }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { borderDash: [2, 2], drawBorder: false } },
                        x: { grid: { display: false } }
                    }
                }
            });

            const categories = { 'record': 0, 'admin': 0, 'conflict': 0 };
            dokdoData.forEach(d => categories[d.category]++);

            new Chart(document.getElementById('categoryChart'), {
                type: 'doughnut',
                data: {
                    labels: ['ë¬¸í—Œ/ê¸°ë¡', 'í–‰ì •/ì¡°ì•½', 'ê°ˆë“±/ë¶„ìŸ'],
                    datasets: [{
                        data: [categories.record, categories.admin, categories.conflict],
                        backgroundColor: ['#f59e0b', '#3b82f6', '#ef4444'], 
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { usePointStyle: true, padding: 20, font: {family: "'Noto Sans KR', sans-serif"} } }
                    },
                    cutout: '65%'
                }
            });
        }

        // --- Timeline Rendering with Century Headers ---
        function renderTimeline() {
            timelineList.innerHTML = '';
            
            const filteredData = currentFilter === 'all' 
                ? dokdoData 
                : dokdoData.filter(d => d.category === currentFilter);

            if (filteredData.length === 0) {
                timelineList.innerHTML = `<div class="text-center text-slate-400 py-10">í•´ë‹¹ ìœ í˜•ì˜ ì‚¬ê±´ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            let lastCentury = 0;

            filteredData.forEach(item => {
                // Calculate Century
                const century = Math.ceil(item.year / 100);
                
                // Add Century Header if changed
                if (century !== lastCentury) {
                    const centuryDiv = document.createElement('div');
                    centuryDiv.className = 'century-wrapper';
                    centuryDiv.innerHTML = `<span class="century-header">${century}ì„¸ê¸°</span>`;
                    timelineList.appendChild(centuryDiv);
                    lastCentury = century;
                }

                const el = document.createElement('div');
                const isActive = selectedEventId === item.year;
                
                // Add ID for scroll targeting
                el.id = `timeline-item-${item.year}`;

                el.className = `timeline-card flex items-start group cursor-pointer p-4 rounded-xl border ${isActive ? 'active border-blue-200 bg-blue-50/50 shadow-md' : 'border-transparent hover:bg-white hover:shadow-sm'} transition-all mb-2 ml-4`;
                el.onclick = () => showDetail(item.year);

                let dotColor = 'bg-slate-300';
                if(item.category === 'record') dotColor = 'bg-amber-400';
                if(item.category === 'admin') dotColor = 'bg-blue-400';
                if(item.category === 'conflict') dotColor = 'bg-red-400';

                let icon = 'ğŸ“„';
                if(item.category === 'record') icon = 'ğŸ“œ';
                if(item.category === 'admin') icon = 'âš–ï¸';
                if(item.category === 'conflict') icon = 'âš”ï¸';

                el.innerHTML = `
                    <div class="flex-shrink-0 w-8 pt-1.5 relative mr-4">
                         <div class="w-3 h-3 rounded-full ${dotColor} ring-4 ring-white shadow-sm mx-auto z-20 relative"></div>
                    </div>
                    <div class="flex-grow">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-sm font-bold ${isActive ? 'text-blue-600' : 'text-slate-400'}">${item.year}</span>
                            <span class="text-[10px] uppercase font-bold text-slate-400 tracking-wide">${item.typeLabel}</span>
                        </div>
                        <h4 class="font-bold text-slate-800 text-base leading-snug group-hover:text-blue-700 transition-colors">${item.title}</h4>
                    </div>
                `;
                timelineList.appendChild(el);
            });
        }

        // --- Interaction Logic ---
        function filterTimeline(category) {
            // Stop auto-play if active
            if(isPlaying) togglePlay();

            currentFilter = category;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.filter === category) {
                    btn.classList.add('bg-white', 'text-slate-900', 'shadow-sm', 'font-bold');
                    btn.classList.remove('text-slate-500', 'hover:text-amber-700', 'hover:text-blue-700', 'hover:text-red-700');
                } else {
                    btn.classList.remove('bg-white', 'text-slate-900', 'shadow-sm', 'font-bold');
                    btn.classList.add('text-slate-500');
                }
            });

            renderTimeline();
        }

        function showDetail(year) {
            selectedEventId = year;
            const item = dokdoData.find(d => d.year === year);
            if (!item) return;

            renderTimeline(); 

            detailPlaceholder.classList.add('hidden');
            detailContent.classList.remove('hidden');
            
            detailContent.classList.remove('fade-in');
            void detailContent.offsetWidth; 
            detailContent.classList.add('fade-in');

            document.getElementById('detail-year').innerText = item.year;
            document.getElementById('detail-title').innerText = item.title;
            document.getElementById('detail-desc').innerText = item.desc;
            document.getElementById('detail-source').innerText = item.source;
            document.getElementById('detail-category-text').innerText = item.typeLabel;

            const badge = document.getElementById('detail-badge');
            const icon = document.getElementById('detail-icon');
            
            badge.innerText = item.category === 'record' ? 'HISTORY' : item.category === 'admin' ? 'ADMINISTRATION' : 'CONFLICT';
            
            if(item.category === 'record') {
                badge.className = 'px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-1 inline-block bg-amber-100 text-amber-700';
                icon.innerText = 'ğŸ“œ';
            } else if(item.category === 'admin') {
                badge.className = 'px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-1 inline-block bg-blue-100 text-blue-700';
                icon.innerText = 'âš–ï¸';
            } else {
                badge.className = 'px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-1 inline-block bg-red-100 text-red-700';
                icon.innerText = 'âš”ï¸';
            }

            // Scroll item into view in the list
            const listItem = document.getElementById(`timeline-item-${year}`);
            if(listItem) {
                listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            // Mobile view scroll logic
            if(window.innerWidth < 1024) {
                 const timelineSection = document.getElementById('timeline-section');
                 detailContent.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // --- Auto Play Logic ---
        function togglePlay() {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                // UI Update
                playBtn.classList.add('playing-indicator', 'bg-red-600', 'hover:bg-red-700');
                playBtn.classList.remove('bg-slate-900', 'hover:bg-slate-700');
                playText.innerText = "ì¼ì‹œ ì •ì§€";
                playIcon.innerText = "â¸";

                // Logic
                // If filter is active, use filtered list. If all, use dokdoData.
                let targetData = currentFilter === 'all' ? dokdoData : dokdoData.filter(d => d.category === currentFilter);
                
                // Find current index
                let currentIndex = targetData.findIndex(d => d.year === selectedEventId);
                if (currentIndex === -1) currentIndex = 0;

                playInterval = setInterval(() => {
                    currentIndex++;
                    if (currentIndex >= targetData.length) {
                        currentIndex = 0; // Loop
                    }
                    showDetail(targetData[currentIndex].year);
                }, 3000); // 3 seconds per slide

            } else {
                // UI Update
                playBtn.classList.remove('playing-indicator', 'bg-red-600', 'hover:bg-red-700');
                playBtn.classList.add('bg-slate-900', 'hover:bg-slate-700');
                playText.innerText = "ì—­ì‚¬ ì¬ìƒ";
                playIcon.innerText = "â–¶";

                // Logic
                clearInterval(playInterval);
            }
        }

        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
